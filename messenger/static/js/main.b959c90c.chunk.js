(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,t,a){e.exports=a(80)},54:function(e,t,a){},55:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);a(44),a(45);var n=a(0),r=a.n(n),c=a(20),s=a.n(c),l=a(35),o=a(36),u=a(41),i=a(37),m=a(42),p=a(13),d=a(3),f=function(e){return r.a.createElement(d.a,null,e.children)},v=(a(54),a(55),function(){return r.a.createElement("div",{className:"row LoginHeader"},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(d.c,{to:"/messenger",className:"brand-logo"},"Messenger"),r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},r.a.createElement("li",null,r.a.createElement(d.c,{to:"/messenger/login"},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/messenger/register"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))))))}),g=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(v,null),r.a.createElement("div",{className:"row Home align-content-start"},r.a.createElement("h3",{className:"col s12"},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c"),r.a.createElement("p",{className:"col s12"},r.a.createElement(d.c,{to:"/messenger/login"},"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 "),"\u0438\u043b\u0438",r.a.createElement(d.c,{to:"/messenger/register"}," \u0441\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"))))},E=a(11),b=a(2),h=a(6),w=a.n(h),N=a(15),j="LOGIN_USER",y="USER_EXIT",O="USER_NEW_NAME",x="USER_NEW_MESS",S="USER_DEL_MESS",k="GET_CHAT",C=a(7),I=a.n(C);function U(e){return function(){var t=Object(N.a)(w.a.mark(function t(a){var n,r,c,s,l;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),n={},r=[],t.prev=3,t.next=6,I.a.post("https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=AIzaSyD-ctZejTPwiu35s4F7ZydNru1fl7mXQpg",e);case 6:return c=t.sent,n.id=c.data.localId,localStorage.setItem("email",e.email),localStorage.setItem("password",e.password),t.next=12,I.a.get("https://reactmessenger-d938e.firebaseio.com/users/".concat(n.id,".json"));case 12:return s=t.sent,n.name=s.data.name,n.age=s.data.age,localStorage.setItem("name",n.name),t.next=18,I.a.get("https://reactmessenger-d938e.firebaseio.com/chat.json");case 18:l=t.sent,r=l.data,t.next=26;break;case 22:return t.prev=22,t.t0=t.catch(3),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0445\u043e\u0434\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430"),t.abrupt("return",!1);case 26:a({type:j,user:n,chat:r});case 27:case"end":return t.stop()}},t,null,[[3,22]])}));return function(e){return t.apply(this,arguments)}}()}a(75);var _=Object(b.b)(null,function(e){return{LoginUser:function(t){return e(U(t))}}})(function(e){var t=Object(n.useState)(""),a=Object(E.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(""),o=Object(E.a)(l,2),u=o[0],i=o[1];return r.a.createElement("div",{className:"container"},r.a.createElement(v,null),r.a.createElement("div",{className:"row Login"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement("h3",null,"\u0412\u0445\u043e\u0434 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"),r.a.createElement("form",null,r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:function(e){s(c=e.target.value)},value:c,id:"email",type:"email",className:"validate",required:!0}),r.a.createElement("label",{htmlFor:"email"},"Email")),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{id:"password",minLength:"6",type:"text",className:"validate",required:!0,onChange:function(e){i(u=e.target.value)},value:u}),r.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c(\u043d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)")),r.a.createElement("div",{className:"input-field col s8"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){t.preventDefault();var a={email:c,password:u,returnSecureToken:!0};e.LoginUser(a),s(c=""),i(u="")}},"\u0412\u043e\u0439\u0442\u0438"))))))});a(76);var F=Object(b.b)(null,function(e){return{RegisterNewUser:function(t){return e(function(e){return function(){var t=Object(N.a)(w.a.mark(function t(a){var n,r,c;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.a.post("https://www.googleapis.com/identitytoolkit/v3/relyingparty/signupNewUser?key=AIzaSyD-ctZejTPwiu35s4F7ZydNru1fl7mXQpg",e);case 3:return n=t.sent,r=n.data.localId,t.next=7,I.a.get("https://reactmessenger-d938e.firebaseio.com/users.json");case 7:return(c=t.sent).data[r]={name:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",age:20},t.next=11,I.a.put("https://reactmessenger-d938e.firebaseio.com/users.json",c.data);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}},t,null,[[0,13]])}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(function(e){var t=Object(n.useState)(""),a=Object(E.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(""),o=Object(E.a)(l,2),u=o[0],i=o[1];return r.a.createElement("div",{className:"container"},r.a.createElement(v,null),r.a.createElement("div",{className:"row Register"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement("h3",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("form",null,r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:function(e){s(c=e.target.value)},value:c,id:"name",type:"email",className:"validate",required:!0}),r.a.createElement("label",{htmlFor:"name"},"Email")),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{id:"password",type:"text",className:"validate",minLength:"6",onChange:function(e){i(u=e.target.value)},value:u}),r.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c(\u043d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)")),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){t.preventDefault();var a={email:c,password:u,returnSecureToken:!0};e.RegisterNewUser(a),s(c=""),i(u="")}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))))))});var L=Object(p.g)(Object(b.b)(null,function(e){return{userExit:function(){return e(function(e){localStorage.removeItem("name"),localStorage.removeItem("email"),localStorage.removeItem("password"),e({type:y})})}}})(function(e){return r.a.createElement("button",{className:"waves-effect waves-light btn-small",onClick:function(){e.history.push("/messenger/"),e.userExit()}},"Exit")}));var M=Object(b.b)(null,function(e){return{userNewName:function(t){return e(function(e){return function(){var t=Object(N.a)(w.a.mark(function t(a){var n,r;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=B.getState().user.id,r={name:e},t.prev=2,t.next=5,I.a.patch("https://reactmessenger-d938e.firebaseio.com/users/".concat(n,".json"),r);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.log(t.t0);case 10:a({type:O,name:e});case 11:case"end":return t.stop()}},t,null,[[2,7]])}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(function(e){var t=Object(n.useState)(""),a=Object(E.a)(t,2),c=a[0],s=a[1];return r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0438\u043c\u0435\u043d\u0438"),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"input-field col s12 l10"},r.a.createElement("input",{id:"name",type:"text",className:"validate",onChange:function(e){return s(c=e.target.value)},value:c}),r.a.createElement("label",{htmlFor:"name"},"\u041d\u043e\u0432\u043e\u0435 \u0438\u043c\u044f"),r.a.createElement("button",{className:"btn btn-small",onClick:function(){e.userNewName(c),s(c="")}},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"))))});a(77);var D=Object(b.b)(function(e){return{chat:e.user.chat}},function(e){return{userNewMess:function(t){return e(function(e){return function(){var t=Object(N.a)(w.a.mark(function t(a){var n,r,c,s;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=B.getState().user.name,r={name:n,text:e},c=[],t.prev=3,t.next=6,I.a.get("https://reactmessenger-d938e.firebaseio.com/chat.json");case 6:return s=t.sent,(c=s.data).push(r),t.next=11,I.a.put("https://reactmessenger-d938e.firebaseio.com/chat.json",c);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0);case 16:a({type:x,newChat:c});case 17:case"end":return t.stop()}},t,null,[[3,13]])}));return function(e){return t.apply(this,arguments)}}()}(t))},userDelMess:function(t){return e(function(e){return function(){var t=Object(N.a)(w.a.mark(function t(a){var n,r;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.prev=1,t.next=4,I.a.get("https://reactmessenger-d938e.firebaseio.com/chat.json");case 4:return(r=t.sent).data.splice(e,1),n=r.data,t.next=9,I.a.put("https://reactmessenger-d938e.firebaseio.com/chat.json",n);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:a({type:S,newChat:n});case 15:case"end":return t.stop()}},t,null,[[1,11]])}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(function(e){var t=Object(n.useState)(""),a=Object(E.a)(t,2),c=a[0],s=a[1],l=e.chat.map(function(t,a){return r.a.createElement("p",{key:a,className:"collection-item"},t.name," : ",t.text,r.a.createElement("button",{className:"btn-small",onClick:function(){e.userDelMess(a)}},"X"))});return r.a.createElement("div",{className:"container Chat"},r.a.createElement("div",{className:"row ChatBody"},r.a.createElement("div",{className:"collection col s12 l12"},l)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{id:"new_name",type:"text",className:"validate",value:c,onChange:function(e){return s(c=e.target.value)}}),r.a.createElement("label",{htmlFor:"new_name"},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")),r.a.createElement("button",{className:"waves-effect waves-small btn",onClick:function(){e.userNewMess(c),s(c="")}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")))});a(78);var R=Object(b.b)(function(e){return{name:e.user.name}},function(e){return{getChat:function(){return e(function(){var e=[];return function(){var t=Object(N.a)(w.a.mark(function t(a){var n;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.a.get("https://reactmessenger-d938e.firebaseio.com/chat.json");case 3:n=t.sent,e=n.data,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:a({type:k,chat:e});case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}())}}})(function(e){return r.a.createElement("div",{className:"container UserPage"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 l4"},r.a.createElement("h3",null,e.name),r.a.createElement("div",{className:"collection"},r.a.createElement(d.b,{to:"/messenger/chat",className:"collection-item",onClick:function(){e.getChat()}},"\u0427\u0430\u0442"),r.a.createElement(d.b,{to:"/messenger/options",className:"collection-item"},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044f")),r.a.createElement(L,null)),r.a.createElement("div",{className:"col s12 l8"},r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/messenger/chat",component:D}),r.a.createElement(p.b,{path:"/messenger/options",component:M})))))}),T=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){if(localStorage.getItem("email")){var e={email:localStorage.getItem("email"),password:localStorage.getItem("password"),returnSecureToken:!0};this.props.LoginUser(e)}}},{key:"render",value:function(){var e=localStorage.getItem("email")?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/messenger",component:R}),r.a.createElement(p.a,{to:"/messenger/"}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/messenger",exact:!0,component:g}),r.a.createElement(p.b,{path:"/messenger/login",extends:!0,component:_}),r.a.createElement(p.b,{path:"/messenger/register",component:F}),r.a.createElement(p.a,{to:"/messenger/"})));return r.a.createElement(f,null,e)}}]),t}(r.a.Component);var A=Object(b.b)(function(e){return{userIndicator:e.user.userIndicator}},function(e){return{LoginUser:function(t){return e(U(t))}}})(T),P=(a(79),a(14)),X=a(40),Z=a(16),q={id:"",name:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",age:"25",chat:[{name:"",text:""}],userIndicator:!1},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(Z.a)({},e,{id:t.user.id,name:t.user.name,age:t.user.age,chat:t.chat,userIndicator:!0});case y:return Object(Z.a)({},e,{userIndicator:!1,id:""});case O:return Object(Z.a)({},e,{name:t.name});case x:case S:return Object(Z.a)({},e,{chat:t.newChat});case k:return Object(Z.a)({},e,{chat:t.chat});default:return e}},z=Object(P.c)({user:H});a.d(t,"store",function(){return B});var B=Object(P.d)(z,Object(P.a)(X.a)),G=r.a.createElement(b.a,{store:B},r.a.createElement(A,null));s.a.render(G,document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.b959c90c.chunk.js.map